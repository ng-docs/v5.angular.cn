{
  "id" : "api/platform-browser/DomSanitizer",
  "title" : "DomSanitizer",
  "contents" : "<article>\n  <header class=\"api-header\">\n    <h1 class=\"no-toc\" id=\"domsanitizer\">DomSanitizer</h1>\n    <label class=\"api-type-label class\">class</label>\n    \n    \n    \n    <span class=\"version\"></span>\n  </header>\n\n  \n  <!-- INFO BAR -->\n<section class=\"info-bar\">\n\n<table class=\"is-full-width\">\n<tbody>\n<tr>\n  <th data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4wfc14obst93bim1zva6hqjl0\">npm 包</th>\n  <td><a href=\"https://www.npmjs.com/package/@angular/platform-browser\">@angular/platform-browser</a></td>\n</tr>\n<tr>\n  <th data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"dkuxw56x8curh875ge5tvqede\">模块</th>\n  <td><code>import { <a href=\"api/platform-browser/DomSanitizer\" class=\"code-anchor\">DomSanitizer</a> } from <a href=\"api/platform-browser\">'@angular/platform-browser'</a>;</code></td>\n</tr>\n<tr>\n  <th data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"ee4tba1a8v4m1low7rnv25o9l\">源码</th>\n  <td><a href=\"https://github.com/angular/angular/tree/5.2.11/packages/platform-browser/src/security/dom_sanitization_service.ts#L62-L148\">platform-browser/src/security/dom_sanitization_service.ts</a></td>\n</tr>\n\n</tbody>\n</table>\n\n  \n  \n<section &#x22;security&#x22;=\"\">\n  <h2 id=\"security-risk\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7krfnqmhr5xnkj124ob1bid2\"><i class=\"material-icons\">link</i>安全风险</h2>\n  <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"854qu38auxumhyt5i14boir1y\">调用任何 \n<code>bypassSecurityTrust...</code> API 会禁用 Angular 为传入的值内置的无害化处理。仔细检查和审计所有进入此调用的值和代码路径。确保任何用户数据都已针对此安全上下文进行了适当的转义。有关更多详细信息，请参阅 \n<a href=\"http://g.co/ng/security\">安全指南</a>。</p>\n\n</section>\n\n  \n  <section class=\"class-overview\">\n<h2 id=\"overview\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3ivgu86loww6mg4fq1brezlnd\"><i class=\"material-icons\">link</i>概览</h2>\n<code-example language=\"ts\" hidecopy=\"true\">\nclass <a href=\"api/platform-browser/DomSanitizer\" class=\"code-anchor\">DomSanitizer</a> implements <a class=\"code-anchor\" href=\"api/core/Sanitizer\">Sanitizer</a> {\n  <a class=\"code-anchor\" href=\"api/platform-browser/DomSanitizer#sanitize\">sanitize(context: SecurityContext, value: SafeValue | string | null): string | null</a>\n  <a class=\"code-anchor\" href=\"api/platform-browser/DomSanitizer#bypassSecurityTrustHtml\">bypassSecurityTrustHtml(value: string): SafeHtml</a>\n  <a class=\"code-anchor\" href=\"api/platform-browser/DomSanitizer#bypassSecurityTrustStyle\">bypassSecurityTrustStyle(value: string): SafeStyle</a>\n  <a class=\"code-anchor\" href=\"api/platform-browser/DomSanitizer#bypassSecurityTrustScript\">bypassSecurityTrustScript(value: string): SafeScript</a>\n  <a class=\"code-anchor\" href=\"api/platform-browser/DomSanitizer#bypassSecurityTrustUrl\">bypassSecurityTrustUrl(value: string): SafeUrl</a>\n  <a class=\"code-anchor\" href=\"api/platform-browser/DomSanitizer#bypassSecurityTrustResourceUrl\">bypassSecurityTrustResourceUrl(value: string): SafeResourceUrl</a>\n}\n</code-example>\n</section>\n\n  \n\n  \n\n\n<section class=\"description\">\n  <h2 id=\"description\" data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"ar5q09mdsagdppsbze96eagxl\"><i class=\"material-icons\">link</i>说明</h2>\n  <p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"ecmiobnc3h5t0j8zcg59omozz\">DomSanitizer 可以把值净化为在不同 DOM 上下文中的安全内容，来帮你防范跨站脚本攻击（XSS）类的安全问题。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4f6j9cmrbmyypvgt007iwjzqp\">例如，在 \n<code>&lt;<a href=\"api/router/RouterLinkWithHref\" class=\"code-anchor\">a</a> [href]=\"someValue\"&gt;</code> 超链接中绑定 URL 时，会对 \n<code>someValue</code> 进行无害化处理，以防止攻击者注入例如 \n<code>javascript:</code> URL，该 URL 会在网站上执行代码。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"85nrta872bsgqix2j4dczmvxa\">在特定场景下，可能要禁用净化机制，比如，如果应用程序真的需要生成具有动态值的 <code>javascript:</code> 链接。用户可以通过使用 <code>bypassSecurityTrust...</code> 方法来构建出一个值，以绕过安全性检查，并在模板中绑定它。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"esqkmt957siaolx72cuuupe7y\">这种场景其实非常罕见，必须特别小心，避免引入跨站脚本攻击（XSS）类的安全风险。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"9253ei9bj0k285eu9fxy71lqq\">当使用 <code>bypassSecurityTrust...</code> 时，请尽量确保尽早调用该方法，并且让他尽可能接近值的来源，以便能更容易地验证使用它时有没有引入安全风险。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"1nmt4h02cd5y6ke09xri68rg1\">如果该值本身是安全的，则不需要绕过安全性检查，比如那些没有使用可疑协议的 URL 或者不包含危险代码的 HTML 片段。净化器会确保值的安全性。</p>\n\n</section>\n\n\n  \n  \n\n\n\n\n\n\n\n<section class=\"instance-members\">\n  <h2 id=\"members\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e62kgm2ztk7rgk6auybfiv91o\"><i class=\"material-icons\">link</i>成员</h2>\n  \n    <div class=\"instance-member\">\n  <a id=\"sanitize\"></a>\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">sanitize(context: <a href=\"api/core/SecurityContext\" class=\"code-anchor\">SecurityContext</a>, value: <a href=\"api/platform-browser/SafeValue\" class=\"code-anchor\">SafeValue</a> | string | null): string | null</code-example>\n  <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"edz6b8pe4s0neetxtqpz57e36\">对给定 SecurityContext 中的值进行无害化处理。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"77nx7emyki8i3l4hr5wd8i2n7\">如果值在上下文中是可信的，此方法将解开包含的安全值并直接使用它。否则，将对值进行无害化处理，使其在给定上下文中安全，例如通过替换具有不安全协议部分（例如 \n<code>javascript:</code>）的 URL。实现负责确保该值可以在给定上下文中安全使用。</p>\n\n  </div>\n\n    \n    <hr class=\"hr-margin\">\n  \n    <div class=\"instance-member\">\n  <a id=\"bypassSecurityTrustHtml\"></a>\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">bypassSecurityTrustHtml(value: string): <a href=\"api/platform-browser/SafeHtml\" class=\"code-anchor\">SafeHtml</a></code-example>\n  <p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"3wumly91t4orlm1jht6md11hn\">绕过安全检查，并信任给定的值是一个安全的 HTML。只有当要绑定的 HTML 是不安全内容（比如包含 <code>&lt;script&gt;</code>）而且你确实希望运行这些代码时，才需要使用它。净化器会确保安全 HTML 的完整性，因此在大多数场景下都不需要使用该方法。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"1c6cgq2tf49pqo4ftjy9r1p3n\"><strong>警告：</strong> 使用不可信的用户数据调用此方法将会让你的应用暴露在 XSS 安全风险之下！</p>\n\n  </div>\n\n    \n    <hr class=\"hr-margin\">\n  \n    <div class=\"instance-member\">\n  <a id=\"bypassSecurityTrustStyle\"></a>\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">bypassSecurityTrustStyle(value: string): <a href=\"api/platform-browser/SafeStyle\" class=\"code-anchor\">SafeStyle</a></code-example>\n  <p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"a77nr6k0g0ecqtygebz146ylw\">绕过安全检查，并信任给定的值是一个安全的样式（CSS）。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"1c6cgq2tf49pqo4ftjy9r1p3n\"><strong>警告：</strong> 使用不可信的用户数据调用此方法将会让你的应用暴露在 XSS 安全风险之下！</p>\n\n  </div>\n\n    \n    <hr class=\"hr-margin\">\n  \n    <div class=\"instance-member\">\n  <a id=\"bypassSecurityTrustScript\"></a>\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">bypassSecurityTrustScript(value: string): <a href=\"api/platform-browser/SafeScript\" class=\"code-anchor\">SafeScript</a></code-example>\n  <p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"6h2k682gruvzp1hwtd8rqfz71\">绕过安全检查，并信任给定的值是一个安全的 JavaScript。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"1c6cgq2tf49pqo4ftjy9r1p3n\"><strong>警告：</strong> 使用不可信的用户数据调用此方法将会让你的应用暴露在 XSS 安全风险之下！</p>\n\n  </div>\n\n    \n    <hr class=\"hr-margin\">\n  \n    <div class=\"instance-member\">\n  <a id=\"bypassSecurityTrustUrl\"></a>\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">bypassSecurityTrustUrl(value: string): <a href=\"api/platform-browser/SafeUrl\" class=\"code-anchor\">SafeUrl</a></code-example>\n  <p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"ar2khtetas58t19qj47qc2tl\">绕过安全检查，并信任给定的值是一个安全的样式 URL。也就是说该值可安全地用在链接或 <code>&lt;img src&gt;</code> 中。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"1c6cgq2tf49pqo4ftjy9r1p3n\"><strong>警告：</strong> 使用不可信的用户数据调用此方法将会让你的应用暴露在 XSS 安全风险之下！</p>\n\n  </div>\n\n    \n    <hr class=\"hr-margin\">\n  \n    <div class=\"instance-member\">\n  <a id=\"bypassSecurityTrustResourceUrl\"></a>\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">bypassSecurityTrustResourceUrl(value: string): <a href=\"api/platform-browser/SafeResourceUrl\" class=\"code-anchor\">SafeResourceUrl</a></code-example>\n  <p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"38af75vgfr4nst9vn8az8wz8z\">绕过安全检查，并信任给定的值是一个安全的资源 URL。也就是说该地址可以安全的用于加载可执行代码，比如 <code>&lt;script src&gt;</code> 或 <code>&lt;iframe src&gt;</code>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"1c6cgq2tf49pqo4ftjy9r1p3n\"><strong>警告：</strong> 使用不可信的用户数据调用此方法将会让你的应用暴露在 XSS 安全风险之下！</p>\n\n  </div>\n\n    \n    \n  \n</section>\n\n\n\n\n\n\n\n\n</section></article>\n<!-- links to this doc:\n - api/core/Sanitizer\n - api/platform-browser\n - guide/security\n-->\n<!-- links from this doc:\n - api/core/Sanitizer\n - api/core/SecurityContext\n - api/platform-browser\n - api/platform-browser/DomSanitizer#bypassSecurityTrustHtml\n - api/platform-browser/DomSanitizer#bypassSecurityTrustResourceUrl\n - api/platform-browser/DomSanitizer#bypassSecurityTrustScript\n - api/platform-browser/DomSanitizer#bypassSecurityTrustStyle\n - api/platform-browser/DomSanitizer#bypassSecurityTrustUrl\n - api/platform-browser/DomSanitizer#description\n - api/platform-browser/DomSanitizer#domsanitizer\n - api/platform-browser/DomSanitizer#members\n - api/platform-browser/DomSanitizer#overview\n - api/platform-browser/DomSanitizer#sanitize\n - api/platform-browser/DomSanitizer#security-risk\n - api/platform-browser/SafeHtml\n - api/platform-browser/SafeResourceUrl\n - api/platform-browser/SafeScript\n - api/platform-browser/SafeStyle\n - api/platform-browser/SafeUrl\n - api/platform-browser/SafeValue\n - api/router/RouterLinkWithHref\n - http://g.co/ng/security\n - https://github.com/angular/angular/tree/5.2.11/packages/platform-browser/src/security/dom_sanitization_service.ts#L62-L148\n - https://www.npmjs.com/package/@angular/platform-browser\n-->"
}