{
  "id" : "guide/service-worker-intro",
  "title" : "Angular 服务工作者简介",
  "contents" : "<div class=\"content\">\n<h1 id=\"angular-service-worker-introduction\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5bxudog612cer74evhk8xnrq2\"><i class=\"material-icons\">link</i>Angular 服务工作者简介</h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"gsdjjelm59wofubnqjl30jvx\">服务工作者增强了传统的 Web 部署模型，使应用能够提供与本地安装的代码具有同等可靠性和性能的用户体验。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"7lz37fhq89j237yc6b926q0m6\">简单来说，Service Worker 就是一段运行在 Web 浏览器中，并为应用管理缓存的脚本。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"191gcmkpho856n3o2977u5b9m\">服务工作者充当网络代理。它们拦截应用发出的所有传出 HTTP 请求，并可以选择如何响应这些请求。例如，它们可以查询本地缓存，如果可用，则提供缓存的响应。代理不仅限于通过编程 API（如 \n<code>fetch</code>）发出的请求；它还包括 HTML 中引用的资源，甚至对 \n<code>index.html</code> 的初始请求。因此，基于服务工作者的缓存是完全可编程的，不依赖于服务器指定的缓存标头。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cowrlvmsjkkfnzjedynkrj7qr\">与构成应用的其他脚本（如 Angular 应用捆绑包）不同，服务工作者在用户关闭标签页后会保留。下次浏览器加载应用时，服务工作者会先加载，并可以拦截对加载应用的资源的每个请求。如果服务工作者被设计为这样做，它可以 \n<em>完全满足应用的加载，而无需网络</em>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3xzvsycdaxebo0isgg07p0au6\">即使在快速可靠的网络中，往返延迟也会在加载应用时引入明显的延迟。使用服务工作者来减少对网络的依赖可以显著改善用户体验。</p>\n<h2 id=\"service-workers-in-angular\" data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"710ds2h0tru0c4kiixhs9s64b\"><i class=\"material-icons\">link</i>Angular 中的 Service Worker</h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6i222nzb3sapwahlcx748t4i6\">Angular 应用作为单页应用，非常适合从服务工作者的优势中获益。从 5.0.0 版本开始，Angular 附带了服务工作者实现。Angular 开发人员可以利用此服务工作者，并从其提供的更高的可靠性和性能中获益，而无需针对低级 API 进行编码。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"clk1dsvuquuv5ery5ddpdreqp\">Angular 的 Service Worker 的设计目标是优化那些使用慢速、不可靠网络的最终用户的体验，同时还要尽可能减小提供过期内容的风险。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c6ic54elfzjix5zopi3sjg9g4\">Angular 服务工作者的行为遵循该设计目标：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bw3ng8zi8e3atlmvgyatifyjh\">缓存应用就像安装本地应用。应用作为一个单元被缓存，所有文件一起更新。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1hxki38gtujqsijv0mllqtofg\">正在运行的应用将继续使用所有文件的相同版本。它不会突然开始接收来自更新版本的缓存文件，这些文件可能不兼容。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"36r4yf9cbqdtxc4mpex99vqms\">当用户刷新应用时，他们会看到最新的完全缓存的版本。新标签页会加载最新的缓存代码。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e09xs9wof4fg61ume3o0cg7ch\">更新在后台发生，在发布更改后相对较快。之前的应用版本将继续提供服务，直到更新安装并准备就绪。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6gmez8vfdejcco00mqxyinrlt\">服务工作者尽可能节省带宽。只有在资源发生更改时才会下载资源。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2vbx9e2ufnkniysmeh5q0hfgc\">为了支持这些行为，Angular 服务工作者从服务器加载一个 \n<em>清单</em> 文件。清单描述了要缓存的资源，并包含每个文件内容的哈希值。当应用更新部署时，清单的内容会发生变化，通知服务工作者应该下载和缓存应用的新版本。此清单是使用 Angular CLI 等构建工具从用户提供的配置文件 \n<code>ngsw-config.json</code> 生成的。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"87cio41wmsemi9ht5p37va0m4\">安装 Angular 服务工作者就像包含一个 \n<code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code> 一样简单。除了将 Angular 服务工作者注册到浏览器外，这还会提供一些可用于注入的服务，这些服务与服务工作者交互，可用于控制它。例如，应用可以请求在有新更新可用时通知它，或者应用可以请求服务工作者检查服务器是否有可用更新。</p>\n<h2 id=\"prerequisites\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e44b21uig1fakj5vcfuvz1bdu\"><i class=\"material-icons\">link</i>先决条件</h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4mqoeueij877ludixcfr90kpg\">要使用 Angular 服务工作者，你必须具有以下 Angular 和 CLI 版本：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5ysgduueo5k5ma28y1olauirq\">Angular 5.0.0 或更高版本。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3icadarzqxo19wbmfjzexfwga\">Angular CLI 1.6.0 或更高版本。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"69g6373uwwzl08qefeo9se08i\">你的应用必须在支持服务工作者的 Web 浏览器中运行。目前，支持 Chrome 和 Firefox 的最新版本。要了解其他支持服务工作者的浏览器，请参阅 \n<a href=\"http://caniuse.com/#feat=serviceworkers\">Can I Use</a> 页面。</p>\n<h2 id=\"related-resources\" data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"e69igq8a2xsab77xsoqacateg\"><i class=\"material-icons\">link</i>相关资源</h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cnwbcanqjgqnoe491p3yctvx7\">有关服务工作者的更多一般信息，请参阅 \n<a href=\"https://developers.google.com/web/fundamentals/primers/service-workers/\">服务工作者：简介</a>.</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"f33b8luo144fgekdm8h3myd77\">有关浏览器支持的更多信息，请参阅 \n<a href=\"https://developers.google.com/web/fundamentals/primers/service-workers/#browser_support\">浏览器支持</a> 部分 \n<a href=\"https://developers.google.com/web/fundamentals/primers/service-workers/\">服务工作者：简介</a>，Jake Archibald 的 \n<a href=\"https://jakearchibald.github.io/isserviceworkerready/\">Is Serviceworker ready?</a>，以及 \n<a href=\"http://caniuse.com/#feat=serviceworkers\">Can I Use</a>.</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3uilyc0f619dw899ab4pb9uzy\">本 Angular 文档的其余部分专门介绍 Angular 服务工作者的实现。</p>\n<h2 id=\"more-on-angular-service-workers\" data-ng_translator_product=\"100\" data-ng_translator_confirmed data-ng_translator_ref_id=\"e9jl51v338pdg88lkv1cl8f1i\"><i class=\"material-icons\">link</i>关于 Angular Service Worker 的更多信息</h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"320pd4quk21g01cifflgmc0pj\">你可能还会对以下内容感兴趣：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5xwemxv88qy5nfi3cdzdic8e2\"><a href=\"guide/service-worker-getting-started\">服务工作者入门</a>.</li>\n</ul>\n\n</div>\n<!-- links to this doc:\n - guide/architecture-next-steps\n - guide/service-worker-getting-started\n-->\n<!-- links from this doc:\n - api/core/NgModule\n - guide/service-worker-getting-started\n - guide/service-worker-intro#angular-service-worker-introduction\n - guide/service-worker-intro#more-on-angular-service-workers\n - guide/service-worker-intro#prerequisites\n - guide/service-worker-intro#related-resources\n - guide/service-worker-intro#service-workers-in-angular\n - http://caniuse.com/#feat=serviceworkers\n - https://developers.google.com/web/fundamentals/primers/service-workers/\n - https://developers.google.com/web/fundamentals/primers/service-workers/#browser_support\n - https://jakearchibald.github.io/isserviceworkerready/\n-->"
}